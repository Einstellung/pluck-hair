# Pluck Backend Configuration
# ============================

# Application settings
app:
  name: "pluck-backend"
  version: "0.1.0"
  log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# Camera settings
camera:
  # Camera type: daheng, mock
  type: daheng
  
  # Device index (1-based for Daheng cameras)
  device_index: 1
  
  # Auto exposure/gain
  exposure_auto: false
  gain_auto: false
  
  # Manual exposure time in microseconds (optional)
  # exposure_time: 10000
  
  # Manual gain value (optional)
  # gain: 1.0

# Vision pipeline settings
vision:
  pipeline:
    steps:
      # Step 1: Resize image for model input
      - name: preprocess
        type: resize
        params:
          size: [640, 640]
          keep_aspect: true
      
      # Step 2: YOLO detection
      - name: detect
        type: yolo
        params:
          model: models/best.pt
          conf: 0.5
          iou: 0.45
          device: auto  # auto, cuda, cpu
          half: false
      
      # Step 3: Post-processing NMS
      - name: postprocess
        type: nms
        params:
          iou_threshold: 0.4
          score_threshold: 0.3

# Storage settings
storage:
  # Image storage (MinIO)
  images:
    # Storage type: minio, local
    type: minio
    
    # MinIO settings
    endpoint: "localhost:9000"
    access_key: "minioadmin"
    secret_key: "minioadmin"
    bucket: "pluck-images"
    secure: false
    
    # For local storage (development)
    # type: local
    # path: ./data/images
  
  # Database (PostgreSQL)
  database:
    # Database type: postgres
    type: postgres
    connection_string: "postgresql://pluck:pluck123@localhost:5432/pluck"
    
    # Connection pool settings
    pool_size: 5
    echo: false  # Echo SQL (for debugging)

# Scheduler settings
scheduler:
  # Delay between frames in milliseconds
  loop_delay_ms: 100
  
  # Maximum consecutive errors before stopping
  max_errors: 10
  
  # Save annotated images with detection boxes
  save_annotated: true

# API settings (for API server mode)
api:
  host: "0.0.0.0"
  port: 8000
  
  # CORS settings
  cors:
    allow_origins: ["*"]
    allow_credentials: true
    allow_methods: ["*"]
    allow_headers: ["*"]


